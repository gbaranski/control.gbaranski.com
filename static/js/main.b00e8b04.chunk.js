(this["webpackJsonpreact-control"]=this["webpackJsonpreact-control"]||[]).push([[0],{15:function(e,a,t){e.exports=t.p+"static/media/humidity.7dd418c2.png"},16:function(e,a){e.exports="data:image/png;base64,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"},18:function(e,a,t){e.exports=t(30)},28:function(e,a,t){},30:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(13),i=t.n(c),s=t(2),m=t.n(s),o=t(6),l=t(9),u=t(10),A=t.n(u),p=(t(12),t(8)),g=t(7),d=t(15),w=t.n(d),E=t(16),f=t.n(E);var T,h=function(e){var a=e.isLoading;return r.a.createElement(g.a,{className:"card center bg-dark ".concat(a?"blur":" ")},r.a.createElement(g.a.Header,{className:"header"},"Alarm clock"),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Text,null,"Currently alarm is set to:"," ",r.a.createElement("span",{className:"time"},e.alarmTime||"Loading..."),r.a.createElement("br",null),"Remaining time:"," ",r.a.createElement("span",{className:"time"},void 0===e.remainingTime?"Loading...":String(e.remainingTime).substring(0,2)+"h "+String(e.remainingTime).substring(3,5)+"m"),r.a.createElement("br",null),"Current alarm state: ",r.a.createElement("span",{className:"time"},e.alarmState),r.a.createElement("br",null),r.a.createElement("img",{src:f.a,width:"110px",alt:"temperatureIcon"}),r.a.createElement("span",null,e.temperature||"Loading...","\xb0C"),r.a.createElement("br",null),r.a.createElement("img",{src:w.a,width:"110px",alt:"humidityIcon"}),r.a.createElement("span",null,e.humidity||"Loading...","%"),r.a.createElement("br",null),"Choose the alarm time here:"," ",r.a.createElement("input",{className:"timepicker bg-dark",type:"time",id:"alarmTime",onChange:e.changeAlarmTime})),r.a.createElement(p.a,{variant:"primary",onClick:e.sendDataToRemoteFunction},"Send time data"),r.a.createElement(p.a,{variant:"primary",onClick:e.switchAlarmStateFunction},"Switch state"),r.a.createElement(p.a,{variant:"primary",onClick:e.testAlarmFunction},"Test alarm!"),r.a.createElement(p.a,{variant:"primary",onClick:e.refreshDataFunction},"\u21bb"),r.a.createElement("div",{className:"loader"},r.a.createElement(A.a,{size:150,color:"#123abc",loading:a})),r.a.createElement(p.a,{variant:"primary",onClick:e.askCredentialsFunction},"Ask for password")))};function x(e,a){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(m.a.mark((function e(a,t){var n,r,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.gbaranski.com"+a,r=localStorage.getItem("username"),c=localStorage.getItem("password"),t.append("username",r||""),t.append("password",c||""),console.log(n),e.next=8,fetch(n,{method:"POST",headers:t}).catch((function(e){alert(e)}));case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return B.apply(this,arguments)}function B(){return(B=Object(o.a)(m.a.mark((function e(a){var t,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Headers,n=localStorage.getItem("username"),r=localStorage.getItem("password"),void 0!==localStorage.getItem("username")&&void 0!==localStorage.getItem("password")){e.next=5;break}return e.abrupt("return");case 5:return t.append("username",n||""),t.append("password",r||""),e.next=9,fetch("https://api.gbaranski.com".concat(a),{method:"POST",headers:t});case 9:if(!(c=e.sent).ok){e.next=18;break}return e.t0=JSON,e.next=14,c.json();case 14:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 18:return e.abrupt("return",{temperature:"?",humidity:"?",remainingTime:"?",alarmTime:"?",alarmState:"?"});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.GET_DATA_ALARMCLOCK="/api/alarmclock/getData",e.GET_DATA_WATERMIXER="/api/watermixer/getData"}(T||(T={}));var k=function(){var e=Object(n.useState)({temperature:0,humidity:0,remainingTime:"",alarmTime:"",alarmState:!1}),a=Object(l.a)(e,2),t=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],A=s[1],p=Object(n.useState)(""),g=Object(l.a)(p,2),d=g[0],w=g[1];return Object(n.useEffect)((function(){null!==localStorage.getItem("username")&&null!==localStorage.getItem("password")||alert("Please set username and password."),setInterval(Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.hasFocus()&&b(T.GET_DATA_ALARMCLOCK).then((function(e){c(e),console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),1e3)}),[]),r.a.createElement("div",null,r.a.createElement(h,{temperature:t.temperature,humidity:t.humidity,remainingTime:t.remainingTime,alarmTime:t.alarmTime,alarmState:t.alarmState,changeAlarmTime:function(e){return w(e.target.value)},refreshDataFunction:Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,b(T.GET_DATA_ALARMCLOCK);case 3:setTimeout((function(){A(!1)}),1e3);case 4:case"end":return e.stop()}}),e)}))),sendDataToRemoteFunction:Object(o.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),(a=new Headers).append("time",d),e.next=5,x("/api/alarmclock/setTime",a);case 5:setTimeout((function(){return A(!1)}),1e3);case 6:case"end":return e.stop()}}),e)}))),switchAlarmStateFunction:Object(o.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),(a=new Headers).append("state",String(t.alarmState?1:0)),e.next=5,x("/api/alarmclock/switchState",a);case 5:setTimeout((function(){return A(!1)}),1e3);case 6:case"end":return e.stop()}}),e)}))),testAlarmFunction:Object(o.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),a=new Headers,e.next=4,x("/api/alarmclock/testSiren",a);case 4:setTimeout((function(){return A(!1)}),1e3);case 5:case"end":return e.stop()}}),e)}))),askCredentialsFunction:function(){!function(){var e=prompt("Whats your username?",""),a=prompt("Whats your password?","");localStorage.setItem("username",e||""),localStorage.setItem("password",a||"")}()},isLoading:u}))};var C=function(e){var a=e.isLoading;return r.a.createElement(g.a,{className:"card center bg-dark ".concat(a?"blur":" ")},r.a.createElement(g.a.Header,{className:"header"},"Watermixer"),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Text,null,"Currently water should be:"," ",r.a.createElement("span",{className:"time"},void 0===e.waterState?"Loading":"1"===e.waterState?"warm":"cold",r.a.createElement("br",null)),"Remaining time:"," ",r.a.createElement("span",{className:"time"},void 0===e.remainingTime?"Loading":Math.floor(e.remainingTime/60%60)+"minutes"+e.remainingTime%60+"seconds"),r.a.createElement("br",null)),r.a.createElement(p.a,{variant:"primary",onClick:e.startMixingFunction},"Start mixing water"),r.a.createElement("div",{className:"loader"},r.a.createElement(A.a,{size:150,color:"#123abc",loading:a}))))};var S=function(){var e=Object(n.useState)({isTimerOn:void 0,remainingSeconds:void 0}),a=Object(l.a)(e,2),t=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],A=s[1];return Object(n.useEffect)((function(){setInterval(Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.hasFocus()&&b(T.GET_DATA_WATERMIXER).then((function(e){c(e),console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),1e3)}),[]),r.a.createElement("div",null,r.a.createElement(C,{waterState:t.isTimerOn,remainingTime:t.remainingSeconds,startMixingFunction:Object(o.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),a=new Headers,e.next=4,x("/api/watermixer/start",a);case 4:setTimeout((function(){A(!1)}),1e3);case 5:case"end":return e.stop()}}),e)}))),isLoading:u}))},D=(t(28),t(32)),j=t(33),N=t(34);i.a.render(r.a.createElement(D.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{xs:12,xl:6},r.a.createElement(k,null)),r.a.createElement(N.a,{xs:12,xl:6},r.a.createElement(S,null)))),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.b00e8b04.chunk.js.map